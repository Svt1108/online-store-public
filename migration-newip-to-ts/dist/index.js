(()=>{"use strict";var e={359:(e,t,r)=>{e.exports=r.p+"assets/img/news_placeholder.jpg"}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e;!function(e){e.everything="everything",e.sources="sources"}(e||(e={}));r(359);class t{constructor(){this.news=new class{draw(e){const t=e.length>=10?e.filter(((e,t)=>t<10)):e,r=document.createDocumentFragment(),o=document.querySelector("#newsItemTemp");t.forEach(((e,t)=>{const s=o.content.cloneNode(!0);t%2&&s.querySelector(".news__item").classList.add("alt"),s.querySelector(".news__meta-photo").style.backgroundImage=`url(${e.urlToImage||"./assets/img/news_placeholder.jpg"})`,s.querySelector(".news__meta-author").textContent=e.author||e.source.name,s.querySelector(".news__meta-date").textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"),s.querySelector(".news__description-title").textContent=e.title,s.querySelector(".news__description-source").textContent=e.source.name,s.querySelector(".news__description-content").textContent=e.description,s.querySelector(".news__read-more a").setAttribute("href",e.url),r.append(s)})),document.querySelector(".news").innerHTML="",document.querySelector(".news").appendChild(r)}},this.sources=new class{draw(e){console.log(e),document.querySelector(".sources").innerHTML="";const t=document.createDocumentFragment(),r=document.querySelector("#sourceItemTemp");e.forEach((e=>{const o=r.content.cloneNode(!0);o.querySelector(".source__item-name").textContent=e.name,o.querySelector(".source__item").setAttribute("data-source-id",e.id),t.append(o)})),document.querySelector(".sources").append(t)}}}drawNews(e){const t=(null==e?void 0:e.articles)?null==e?void 0:e.articles:[];this.news.draw(t)}drawSources(e){const t=(null==e?void 0:e.sources)?null==e?void 0:e.sources:[];this.sources.draw(t)}drawSourcesFilter(e,t){const r=(null==e?void 0:e.sources)?null==e?void 0:e.sources:[],o=[];r.forEach((e=>{e.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())&&o.push(e)})),this.sources.draw(o)}}(new class{constructor(){this.controller=new class extends class extends class{constructor(e,t){this.baseLink=e,this.options=t}getResp({endpoint:e,options:t={}},r=(()=>{console.error("No callback for GET response")})){this.load("GET",e,r,t)}errorHandler(e){if(!e.ok)throw 401!==e.status&&404!==e.status||console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`),Error(e.statusText);return e}makeUrl(e,t){const r=Object.assign(Object.assign({},this.options),e);let o=`${this.baseLink}${t}?`;return Object.keys(r).forEach((e=>{o+=`${e}=${r[e]}&`})),o.slice(0,-1)}load(e,t,r,o={}){fetch(this.makeUrl(o,t),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>r(e))).catch((e=>console.error(e)))}}{constructor(){super("https://nodenews.herokuapp.com/",{apiKey:"3e7e51dc7c394ed8b14743735a727c49"})}}{getSources(t){super.getResp({endpoint:e.sources},t)}getNews(t,r){let o=t.target;const s=t.currentTarget;for(;o&&o!==s;){if(o.classList.contains("source__item")){const t=o.getAttribute("data-source-id");return void(t&&s.getAttribute("data-source")!==t&&(s.setAttribute("data-source",t),super.getResp({endpoint:e.everything,options:{sources:t}},r)))}o=o.parentNode}}},this.view=new t,this.theme=new class{newTheme(e){const t="light"===e?"dark":"light";localStorage.clear(),localStorage.setItem("theme_saved",t),this.changeTheme(t)}changeTheme(e){"dark"===e?(document.documentElement.style.setProperty("--background","rgb(2, 1, 42)"),document.documentElement.style.setProperty("--sources-border","rgb(129, 1, 86)"),document.documentElement.style.setProperty("--news-border","rgb(86, 1, 86)"),document.documentElement.style.setProperty("--header-text","rgb(249, 226, 245)"),document.documentElement.style.setProperty("--background-opacity","rgba(0, 0, 0, 1)"),document.documentElement.style.setProperty("--button-font","rgb(249, 246, 245)"),document.documentElement.style.setProperty("--focus-color","rgb(249, 226, 245)"),document.documentElement.style.setProperty("--search-button","rgb(239, 237, 239)"),document.documentElement.style.setProperty("--search-button-shadow","rgba(239, 237, 239, 0.7)")):(document.documentElement.style.setProperty("--background","rgb(255, 255, 255)"),document.documentElement.style.setProperty("--sources-border","rgba(86, 1, 86, 0.5)"),document.documentElement.style.setProperty("--news-border","rgba(86, 1, 86, 0.5)"),document.documentElement.style.setProperty("--header-text","#B05FA0"),document.documentElement.style.setProperty("--background-opacity","rgba(220, 220, 220, 1)"),document.documentElement.style.setProperty("--button-font","rgb(40, 8, 75)"),document.documentElement.style.setProperty("--focus-color","rgb(86, 1, 86)"),document.documentElement.style.setProperty("--search-button","rgb(66, 12, 75)"),document.documentElement.style.setProperty("--search-button-shadow","rgba(66, 12, 75, 0.7)"))}}}start(){localStorage.getItem("theme_saved")||localStorage.setItem("theme_saved","light"),this.theme.changeTheme(localStorage.getItem("theme_saved")),document.querySelector(".sources").addEventListener("click",(e=>this.controller.getNews(e,(e=>this.view.drawNews(e))))),this.controller.getSources((e=>this.view.drawSources(e))),document.querySelector(".switch-theme").addEventListener("click",(()=>{this.theme.newTheme(localStorage.getItem("theme_saved"))})),document.querySelector(".search__button").addEventListener("click",(()=>{const e=document.getElementById("search-text").value;this.controller.getSources((t=>this.view.drawSourcesFilter(t,e)))})),document.getElementById("search-text").addEventListener("keydown",(e=>{if("Enter"===e.code){const e=document.getElementById("search-text").value;this.controller.getSources((t=>this.view.drawSourcesFilter(t,e)))}}))}}).start()})()})();